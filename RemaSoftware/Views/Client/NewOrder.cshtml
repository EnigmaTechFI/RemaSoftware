@model RemaSoftware.Models.ClientViewModel.NewOrderViewModel
<!-- WEBCAM -->
<form method="post">
    @Html.HiddenFor(model => model.Photo, new { @id = "Photo_base64" })
    <div class="row">
        <div class="col-md-6" style="padding-top:50px;">
            <div class="panel panel-default">
                <div class="panel-heading">Live Web Camera</div>
                <div class="panel-body">
                    <div id="LiveCamera" style="margin-bottom:50px;"></div>
                    <input id="Photo_base64" asp-for="Photo" type="button" class="btn btn-primary" value="Capture Snapshot" onClick="CaptureSnapshot()">

                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6" style="padding-top:50px;">
            <div class="panel panel-default">
                <div class="panel-heading">Captured Snapshot/Image</div>
                <div class="panel-body">
                    <div id="results">Your snapshot will appear here...</div>
                </div>
                <br />
                <br />
            </div>
        </div>
    </div>
    <div class="form-group">
        <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Seleziona Cliente</label>
        <select class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref" name="Order.ClientID">
            @for(int i = 0; i < Model.Clients.Count; i++)
            {
                <option asp- value="@Model.Clients[i].ClientID">@Model.Clients[i].Name</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="formGroupExampleInput">Nome</label>
        <input asp-for="Order.Name" type="text" class="form-control" id="formGroupExampleInput" placeholder="Nome">
    </div>
    <div class="form-group">
        <label for="formGroupExampleInput">Codice</label>
        <input asp-for="Order.SKU" type="text" class="form-control" id="formGroupExampleInput" placeholder="Codice">
    </div>
    <div class="form-group">
        <label for="formGroupExampleInput">Numero di pezzi</label>
        <input asp-for="Order.Number_Piece" type="number" class="form-control" id="formGroupExampleInput" placeholder="Numero di pezzi">
    </div>
    <div class="form-group">

        <label for="exampleFormControlTextarea1">Seleziona data di consegna</label>
        <div class='input-group date' id='datetimepicker1'>
            <input placeholder="Seleziona data di consegna" type='text' class="form-control" />
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>
        <!-- MANCA l'installazione del jQuery-->
        <script type="text/javascript">
            $(function () {
                $('#datetimepicker1').datetimepicker();
            });
        </script>
    </div>

    <div class="form-group">
        <label for="exampleFormControlTextarea1">Descrizione</label>
        <textarea asp-for="Order.Description" class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
    </div>


    @foreach (var operation in Model.Operation)
    {
        <div class="form-check">

            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
            <label class="form-check-label" for="flexCheckDefault">
                @operation.Name
            </label>
        </div>

    }
    <div style="width:100px; margin-top:50px;">
        <button class="btn btn-primary" type="submit">Aggiungi</button>
    </div>
</form>


<script src="~/webcamjs/webcam.js"></script>

<!-- Javascript code to capture the snapshot and displaying it in the screen -->
<script language="JavaScript">
    Webcam.set({
        width: 500,
        height: 375,
        image_format: 'png',
        jpeg_quality: 100
    });
    Webcam.attach('#LiveCamera');

    function CaptureSnapshot() {
        Webcam.snap(function (data) {
            // display results in page
            document.getElementById('results').innerHTML = '<img src="' + data + '"/>';
            document.getElementById("Photo_base64").value = data;
            // Send image data to the controller to store locally or in database
            Webcam.upload(data,
                '/WebCam/CaptureImage',
                function (code, text) {
                    alert('Snapshot/Image captured successfully...');
                });
        });
    }
</script>
